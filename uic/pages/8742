<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery.js"></script>
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery-migrate.js"></script>
<link rel="stylesheet" href="/pub/TWiki/JQueryPlugin/jquery-all.css" type="text/css" media="all" />
<script type="text/javascript" src="/pub/TWiki/JQueryPlugin/jquery-all.js"></script>
<title> Homework8 &lt; CS450fall11 &lt; TWiki</title>

<link rel="icon" href="https://www1.cs.uic.edu/images/favicon.ico" type="image/x-icon" />
<link rel="alternate" href="https://www.cs.uic.edu/bin/edit/CS450fall11/Homework8?_T=2018-11-25" type="application/x-wiki" title="edit Homework8" />
<link rel="shortcut icon" href="https://www1.cs.uic.edu/images/favicon.ico" type="image/x-icon" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/bin/view/CS450fall11/WebRss" />
<base href="https://www.cs.uic.edu/bin/view/CS450fall11/Homework8"></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="/pub/TWiki/PatternSkin/pattern.js"></script>
<style type="text/css" media="all">
@import url('/pub/TWiki/TWikiTemplates/base.css');
</style>
<style type="text/css" media="all">
#patternTopBar,
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight,
#patternTopBarContentsOuter,
#patternTopBarContents {
/*	height:64px; */ /* top bar height; make room for header columns */
	overflow:hidden;
}
#patternOuter {
	margin-left:14em;
}
#patternLeftBar {
	width:14em;
	margin-left:-14em;
}
</style>
<style type="text/css" media="all">
@import url('/pub/TWiki/PatternSkin/layout.css');
@import url('/pub/TWiki/PatternSkin/style.css');
@import url('/pub/TWiki/PatternSkin/colors.css');
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	.patternBookView .twikiTopRow,
	.patternWebIndicator a img,
	.patternWebIndicator a:hover img {
		background-color:#D0D0D0;
	}
	#patternTopBarContents { background-image:url(none); background-repeat:no-repeat;}
	
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/pub/TWiki/PreviewBackground/preview2bg.gif");*/
	}
	
</style><style type="text/css" media="all">

@import url('/pub/Main/WebPreferences/mainweb.css');

</style>
<style type="text/css" media="all">
	@import url("/pub/TWiki/PatternSkin/print.css");
</style>
<!--[if IE]><style type="text/css" media="screen">
pre {
	overflow-x:auto;
	padding-bottom:expression(this.scrollWidth > this.offsetWidth ? 16 : 0);
}
</style>
<![endif]-->
<!--[if lte IE 6]> 
<style type="text/css">
#patternLeftBar {
	position:relative; /* IE 5.5 needs this or the contents won't show outside the parent container on print. IE 6.0 needs it only during printable copy! */
}
</style><![endif]-->
<script type="text/javascript" src="/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script>

<!-- Google Analytics Snippet -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17081517-1']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
	 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 
'.google-analytics.com/ga.js';
	 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- /Google Analytics Snippet -->
</head>
<body class="patternViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain"><div id="patternClearHeaderCenter"></div>
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath twikiLeft"><a href="/bin/view/Main/WebHome" class="twikiLink">TWiki</a><span class='twikiSeparator'>&gt;</span><img src="/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" border="0" alt="" width="13" height="13" style="background-color:#D0D0D0" />&nbsp;<a href="/bin/view/CS450fall11/WebHome">CS450fall11 Web</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/CS450fall11/Syllabus" class="twikiLink">Syllabus</a><span class='twikiSeparator'>&gt;</span><a href="/bin/view/CS450fall11/Homeworks" class="twikiLink">Homeworks</a><span class='twikiSeparator'>&gt;</span><a href="https://www.cs.uic.edu/bin/view/CS450fall11/Homework8" title='Topic revision: 1 (2011-10-17 - 19:36:00)'>Homework8</a> <span class='patternRevInfo'>(2011-10-17, Main.jakob)</span></span><!-- /patternHomePath--><span class="patternToolBar twikiRight"><span><a href='https://www.cs.uic.edu/bin/edit/CS450fall11/Homework8?t=1543180312' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span><a href='/bin/attach/CS450fall11/Homework8' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span></span><!-- /patternToolBar--><br class="twikiClear" /></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <h1><a name="Homework_8_who_are_the_big_fish"></a> Homework 8 - who are the big fish on the Internet? </h1>
<p />
In this homework, we again use <a href="/bin/view/CS450fall11/PlanetLab" class="twikiLink">PlanetLab</a>, but this time we look in more detail at the routes taken between hosts.
<p />
Using the command `traceroute', you are to collect the routes taken between each pair of hosts (using the same hosts as in homework 7). We want to find out some statistics about various networks that make up the Internet. These networks are called Autonomous Systems, or AS:es, and each has its own AS number (ASN).
<p />
You can find out the ASN that controls a given IP address using the command 'whois'. I've found that 'whois -H whois.cymru.com' gives reasonably reliable ASN results, certainly much better than just 'whois'.
<p />
For large sets of lookups, CYMRU provides a much faster 'bulk' service. Here is an example of how you use it. Make a file with all the IPs you want to look up, with an additional 'begin' line at the top, and 'end' line at the bottom:<br /><br />begin<br />119.136.12.130<br />119.136.12.133<br />119.136.12.134<br />119.145.47.1<br />119.145.47.10<br />end<br /><br />say we call the file 'bulkwhois'. Then use netcat to do the bulk lookup, thus:<br /><br />nc whois.cymru.com 43 &lt; bulkwhois<br /><br />A lookup of 5000+ IPs took me about 3 seconds!
<p />
<h2><a name="Submission_requirements"></a> Submission requirements </h2>
<p />
We are interested in learning about the organizational structure of the Internet, in terms of autonomous systems. Submit a Makefile (and any necessary scripts) that collects traceroute data for each pair of hosts when 'make collect' is called. I would expect it to be 10000-20000 pairs. The exact number is not important, but it needs to be several thousand pairs.
<p />
Once the data is collected, we need to process it to learn the following statistics: <ol>
<li> What 30 AS:es are the most frequently occurring ASNs between our hosts? Take care not to double-count ASNs when they appear more than once in a route.
</li> <li> What 30 AS:es have the largest `degree' or 'number of neighboring ASNs'.
</li> <li> What 30 AS:es have the largest number of observed hosts?
</li> <li> What AS:es occur in all three lists above? Try googling for "ASxxxxx" to find out what networks these are!
</li></ol> 
Submit your code together with all files generated by the post-processing step (not the initial logs). Your makefile should support the following commands: <ul>
<li> make clean - remove all logs and temporary files
</li> <li> make collect - collect new traceroute measurements
</li> <li> make postprocess - do all time-consuming post-processing here
</li> <li> make report - generate a final report on stdout
</li></ul> 
'make report' should generate as output the 3 lists above, with descriptive titles. Submit an example of your output from 'make report' in a file called REPORT.txt.
<h2><a name="Hints"></a> Hints </h2>
<p />
Sometimes traceroute does not finish due to nonresponsive hosts (asterisks). If you limit the max TTL to 25 hops, and the wait time to 2 seconds, it'll finish faster.
<p />
Use the whois.cymru.com whois database. If the ASN of a given IP does not exist in this databasee (it happens), you can ignore it.
<p />
'head -30' gives you the top 30 lines of a file or stdin.
<p />
traceroute -n gives you the IP addresses instead of hostnames (and it runs faster)
<p />
to run a shell command in awk, and get the results, use getline:
<p />
echo . | awk '{ "du -s "$0 | getline wcresult; close("wc "$0); print wcresult}'
<p />
don't forget to close the "file" as shown, you'll have a ton of file descriptors open at once.
<p />
to concatenate strings in awk, put them next to each other: "one"$1"two"
<p />
if you want to use awk in a Makefile, be careful about your dollar signs. Make will replace any $X with the value of X, so double all your awk $ into $$.
<p />
if you start lots of processes with &amp; from inside a script, you can wait for all of them to finish with "wait".
<p />
traceroute -z 500 makes traceroute be a little more gentle with its transmissions </div><!-- /patternTopic-->
<div class="twikiContentFooter"></div></div><!-- /patternContent-->
<a name="topic-actions"></a><div class="patternTopicActions"><div class="patternTopicAction"><span class="patternActionButtons"><span><a href='https://www.cs.uic.edu/bin/edit/CS450fall11/Homework8?t=1543180312' rel='nofollow' title='Edit this topic text' accesskey='e'><span class='twikiAccessKey'>E</span>dit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/attach/CS450fall11/Homework8' rel='nofollow' title='Attach an image or document to this topic' accesskey='a'><span class='twikiAccessKey'>A</span>ttach</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/CS450fall11/Homework8?cover=print' rel='nofollow' title='Printable version of this topic' accesskey='p'><span class='twikiAccessKey'>P</span>rint version</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><span><a href='/bin/rdiff/CS450fall11/Homework8?type=history' rel='nofollow' title='View total topic history' accesskey='h'><span class='twikiAccessKey'>H</span>istory</a></span>: r1</span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/CS450fall11/Homework8?template=backlinksweb' rel='nofollow' title='Search the CS450fall11 Web for topics that link to here' accesskey='b'><span class='twikiAccessKey'>B</span>acklinks</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/view/CS450fall11/Homework8?raw=on' rel='nofollow' title='View raw text without formatting' accesskey='r'><span class='twikiAccessKey'>R</span>aw View</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='https://www.cs.uic.edu/bin/edit/CS450fall11/Homework8?t=1543180312;nowysiwyg=1' rel='nofollow' title='Raw Edit this topic text' accesskey='w'>Ra<span class='twikiAccessKey'>w</span> edit</a></span><span class='twikiSeparator'>&nbsp;|&nbsp;</span><span><a href='/bin/oops/CS450fall11/Homework8?template=oopsmore&amp;param1=1&amp;param2=1' rel='nofollow' title='Delete or rename this topic; set parent topic; view and compare revisions' accesskey='m'><span class='twikiAccessKey'>M</span>ore topic actions</a></span></span></div><!--/patternTopicAction--></div><!--/patternTopicActions--><div class="patternInfo twikiGrayText"><div class="patternRevInfo">Topic revision: r1 - 2011-10-17 - 19:36:00 - Main.jakob</div><!-- /patternRevInfo--><div class="patternMoved"></div><!-- /patternMoved--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain--><div id="patternLeftBar"><div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents"><div class="patternWebIndicator"> <ul>
<li> <a href="/bin/view/CS450fall11/WebHome" class="twikiCurrentWebHomeLink twikiLink"><img src="/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" width="13" height="13" alt="Web background" title="Web background" border="0" /> CS450fall11</a>
</li></ul> 
</div>
<a href="/bin/view/CS450fall11/WebHome" class="twikiCurrentWebHomeLink twikiLink">Home</a>
<p /> <ul>
<li> <a href="/bin/view/CS450fall11/Syllabus" class="twikiLink">Syllabus</a>
</li> <li> <a href="/bin/view/CS450fall11/Recordings" class="twikiLink">Lecture Recordings</a>
</li> <li> <a href="/bin/view/CS450fall11/Homeworks" class="twikiLink">Homeworks</a> 
</li> <li> - <a href="/bin/view/CS450fall11/Subversion" class="twikiLink">Subversion</a>
</li> <li> <a href="/bin/view/CS450fall11/Schedule" class="twikiLink">Schedule</a>
</li></ul> 
<!--   * <a href="http://listserv.uic.edu/archives/cs450f11.html" target="_top">List Archives</a> --> <ul>
<li> <a href="http://www.piazza.com/class#450" target="_top">Q&amp;A System</a>
</li> <li> <a href="/bin/view/Jakob/ShellScripting" class="twikiLink">Shell Scripting</a>
</li></ul> 
<p />
<hr /> <ul>
<li> <a href="https://www.cs.uic.edu/bin/view/CS450fall11/WebCreateNewTopic?topicparent=WebHome" target="_top">Create New Topic</a>
</li> <li> <a href="http://www.cs.uic.edu/bin/view/CS450fall11/WebRss" target="_top">Changes RSS</a>
</li></ul> 
<p />
<hr />
<div class="patternLeftBarPersonal">
<ul><li class="patternLogIn"><a href="/bin/logon/CS450fall11/Homework8">Log In</a> </li></ul>
</div><!--/patternLeftBarPersonal-->
</div><!-- /patternLeftBarContents--></div><!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper--><div id="patternTopBar"><div id="patternTopBarContents"><div id="twikiLogo" class="twikiImage">
<map id="logomap" name="logomap">
	<area shape="rect" alt="" title="" coords="144,20,317,74" href="https://www.cs.uic.edu" target=""/>
	<area shape="rect" alt="College of Engineering" title="" coords="125,76,300,91" href="http://www.engineering.uic.edu/" target=""/>
	<area shape="rect" alt="University of Illinois at Chicago" title="" coords="10,20,120,71" href="http://www.uic.edu" target=""/>
</map>
<img src="https://www.cs.uic.edu/pub/cslogo_ds.png" alt="Home - this site is powered by TWiki(R)" border="0" style="border:none;" usemap="#logomap"/>
</div>
<p />
<div style="margin-left:650px; position:relative;">
	<form name="quickSearchForm" method="get" action="https://www.google.com/search">
		<input id=quickSearchBox type="text" class="twikiInputField" name="q" size="18" maxlength="255" value=""/>
		<input type="hidden" name="sitesearch" value="cs.uic.edu"/>
	</form>
</div>
<p />
<div id="menuContainer" style="overflow:visible; position:absolute; z-index:2; width:640px; left:342px; top:58px;">
<div id="navMenu">
<ul>
<li> <a href="#">ABOUT US</a>
	<ul>
	<li><a href="https://www.cs.uic.edu/Main/AboutCS">Our Department</a></li>
	<li><a href="https://www.cs.uic.edu/bin/view/Main/NewsArchive">Recent News</a></li>
	<li><a href="https://www.cs.uic.edu/bin/view/Main/Contact">Contact Us</a></li>
	</ul>
</li>
</ul>
<ul>
<li> <a href="#">ACADEMICS</a>
	<ul>
	<li><a href="/Main/ProspectiveStudents">Prospective Students</a></li>
	<li><a href="/Main/UndergraduatePrograms">Undergraduate</a></li>
	<li><a href="/Main/ComputerScienceMinor">CS Minor</a></li>       
	<li><a href="/Main/GraduatePrograms">Graduate</a></li>
	<li><a href="/Main/Courses">Courses</a></li>
	</ul>
</li>
</ul>
<ul>
<li> <a href="#">RESEARCH</a>
	<ul>
	<li><a href="/Main/Research">Overview</a></li>
	<li><a href="/Main/Faculty-Area">By Faculty</a></li>
	<li><a href="/Main/Research#Labs">Labs</a></li>
	</ul>
</li>
</ul>
<ul>
<li> <a href="#">PEOPLE</a>
	<ul>
	<li><a href="https://www.cs.uic.edu/faculty/">Faculty</a></li>
	<li><a href="https://www.cs.uic.edu/adjuncts/">Adjuncts</a></li>
	<li><a href="https://www.cs.uic.edu/staff">Staff</a></li>
	<li><a href="/Main/Students">Students</a></li>
	<li><a href="/Main/Alumni?y=2015">Alumni</a></li>
	</ul>
</li>
</ul>
<br class="clearFloat"/>
</div>
</div></div></div><!-- /patternTopBar--><div id="patternBottomBar"><div id="patternBottomBarContents"><div id="patternWebBottomBar"><table width="100%"><tr>
<td>Copyright 2016 The Board of Trustees<br/> of the University of Illinois.<a href="webmaster@cs.uic.edu">webmaster@cs.uic.edu</a></td>
<td><a href="https://wisest.uic.edu" target=_blank>WISEST<br />Helping Women Faculty Advance<br />Funded by NSF</a> </td><td>  <a href="http://engineering.uic.edu/bin/view/COE/CollegeGift" target="_top"><img alt="" src="https://www.cs.uic.edu/pub/Main/WebHome/gift.jpg" /></a> <a href="http://www1.cs.uic.edu/www/donate.php?audience=public" target="_top"> </a> </td><td> <a target="_blank" href="http://www.cs.uic.edu/CSOpenHouse"><img alt="" src="https://www.cs.uic.edu/pub/Main/WebHome/openHouseButton.gif" border="0" /></a> </td></tr></table></div><!--/patternWebBottomBar--></div><!-- /patternBottomBarContents--></div><!-- /patternBottomBar-->
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body></html>
<p />